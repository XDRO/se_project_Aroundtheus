!function(){"use strict";class e{constructor(e,t,s){let{name:n,link:o}=e;this._name=n,this._link=o,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_getElement(){return document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}getView(){this._cardElement=this._getElement();const e=this._cardElement.querySelector(".card__description-text"),t=this._cardElement.querySelector(".card__image");return t.src=this._link,t.alt=this._name,e.textContent=this._name,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._errorClass=e.errorClass,this._inputErrorClass=e.inputErrorClass,this._inactiveButtonClass=e.inactiveButtonClass,this._form=t,this._inputElements=Array.from(t.querySelectorAll(this._inputSelector)),this._submitButton=t.querySelector(this._submitButtonSelector)}_showInputError(e,t){e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e,t){const s=e.querySelector(`#${t.id}-error`);t.classList.remove(this._inputErrorClass),s.textContent=""}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}toggleButtonState(){if(this._hasInvalidInput())return this._submitButton.classList.add(this._inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_checkInputValidity(e,t){t.validity.valid?this._hideInputError(e,t):this._showInputError(t,document.querySelector(`#${t.id}-error`))}setEventListeners(){this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(this._form,e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this.setEventListeners()}}class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._popupClose=this._popupElement.querySelector(".modal__close")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupClose.addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("mousedown",(e=>{e.target.classList.contains("modal_opened")&&this.close()}))}}class n extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t}close(){this._popupForm.reset(),super.close()}_getInputValues(){const e=this._popupForm.querySelectorAll(".modal__input"),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setInputValues(e){this._popupForm.querySelectorAll(".modal__input").forEach((t=>{e[t.name]&&(t.value=e[t.name])}))}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}}document.querySelectorAll(".modal");const o=document.querySelector("#profile-edit-button"),r=document.querySelector("#profile-edit-modal"),i=document.querySelector("#profile-add-modal"),a=r.querySelector("#edit-card-form"),l=i.querySelector(".modal__form"),c=(document.querySelector(".cards__list"),document.querySelector("#profile-add-button")),u={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},d=new n("#profile-add-modal",(function(e){const t=h(e);E.addItem(t),d.close()}));d.setEventListeners();const m=new class{constructor(e,t){this._nameElement=document.querySelector(e),this._descriptionElement=document.querySelector(t)}getUserInfo(){return{name:this._nameElement.textContent,description:this._descriptionElement.textContent}}setUserInfo(e){this._nameElement.textContent=e.name,this._descriptionElement.textContent=e.description}}(".profile__title",".profile__description"),p=new n("#profile-edit-modal",(e=>{m.setUserInfo(e),p.close()}));p.setEventListeners();const _=new class extends s{constructor(e){super({popupSelector:e}),this._popupImage=document.querySelector(".modal__preview-image"),this._popupImageDescription=document.querySelector(".modal__preview-description")}open(e){e&&(this._popupImage.src=e.link,this._popupImage.alt=e.name,this._popupImageDescription.textContent=e.name),super.open()}}("#preview-image-modal");function h(t){return new e(t,"#card-template",v).getView()}_.setEventListeners();const E=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg",alt:"Yosemite Valley"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg",alt:"Lake Lousie"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg",alt:"Bald Mountains"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg",alt:"Latemar"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg",alt:"Vanoise National Park"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg ",alt:"Lago di Braies"}],renderer:e=>{const t=h(e);E.addItem(t)}},".cards__list");function v(e){_.open(e)}E.renderItems(),new t(u,a).enableValidation();const S=new t(u,l);S.enableValidation(),o.addEventListener("click",(()=>{const e=m.getUserInfo();p.setInputValues(e),p.open()})),c.addEventListener("click",(()=>{S.toggleButtonState(),d.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUYsRUFDakJ0SCxLQUFLeUgsV0FBYTFHLFNBQVNSLGNBQWM2RyxFQUMzQyxDQUNBTSxXQUFBQSxHQUNFMUgsS0FBS3VILE9BQU8zRCxTQUFTdUQsSUFDbkJuSCxLQUFLd0gsVUFBVUwsRUFBSyxHQUV4QixDQUNBZCxPQUFBQSxDQUFRYyxHQUNObkgsS0FBS3lILFdBQVdFLFFBQVFSLEVBQzFCLEdIdUJBLENBQ0VFLE1ENUJ3QixDQUMxQixDQUNFdkgsS0FBTSxrQkFDTkMsS0FBTSxxR0FDTndCLElBQUssbUJBRVAsQ0FDRXpCLEtBQU0sY0FDTkMsS0FBTSx3R0FDTndCLElBQUssZUFFUCxDQUNFekIsS0FBTSxpQkFDTkMsS0FBTSwyR0FDTndCLElBQUssa0JBRVAsQ0FDRXpCLEtBQU0sVUFDTkMsS0FBTSxvR0FDTndCLElBQUssV0FFUCxDQUNFekIsS0FBTSx3QkFDTkMsS0FBTSxvR0FDTndCLElBQUsseUJBRVAsQ0FDRXpCLEtBQU0saUJBQ05DLEtBQU0sa0dBQ053QixJQUFLLG1CQ0FMK0YsU0FBV0gsSUFDVCxNQUFNUyxFQUFjekIsRUFBV2dCLEdBQy9CZixFQUFRQyxRQUFRdUIsRUFBWSxHQUdoQyxnQkFZRixTQUFTL0gsRUFBaUIwRixHQUN4QnlCLEVBQVc1QyxLQUFLbUIsRUFDbEIsQ0FaQWEsRUFBUXNCLGNBY2tCLElBQUlqRyxFQUM1QnNFLEVBQ0E4QixHQUVnQmhFLG1CQUVsQixNQUFNaUUsRUFBbUIsSUFBSXJHLEVBQzNCc0UsRUFDQThCLEdBRUZDLEVBQWlCakUsbUJBR2pCZ0UsRUFBQUEsaUJBQXVDLFNBQVMsS0FDOUMsTUFBTWQsRUFBV1QsRUFBU0ssY0FDMUJHLEVBQWN4QixlQUFleUIsR0FDN0JELEVBQWMxQyxNQUFNLElBSXRCeUQsRUFBQUEsaUJBQXNDLFNBQVMsS0FDN0NDLEVBQWlCdEUsb0JBQ2pCeUMsRUFBYTdCLE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL3NjcmlwdHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9zY3JpcHRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvc2NyaXB0cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9zY3JpcHRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL3NjcmlwdHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvc2NyaXB0cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9zY3JpcHRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBsaW5rIH0sIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gIH1cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvL1wiLmNhcmRfX2xpa2UtYnV0dG9uXCJcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgLy9cIi5jYXJkX19kZWxldGUtYnV0dG9uXCJcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpO1xyXG4gICAgICB9KTtcclxuICAgIC8vXCIuY2FyZF9faW1hZ2VcIlxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2VJY29uKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcclxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgX2dldEVsZW1lbnQoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRFbGVtZW50KCk7XHJcbiAgICBjb25zdCBjYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5jYXJkX19kZXNjcmlwdGlvbi10ZXh0XCJcclxuICAgICk7XHJcbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICBjYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIGNhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdGlvbiB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IEFycmF5LmZyb20oXHJcbiAgICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsLCBlcnJvck1lc3NhZ2VFbCkge1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGZvcm1FbHMsIGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gZm9ybUVscy5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVsZW1lbnRzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxzLCBpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoXHJcbiAgICAgICAgaW5wdXRFbCxcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApXHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihmb3JtRWxzLCBpbnB1dEVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkodGhpcy5fZm9ybSwgaW5wdXRFbCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4vUG9wdXBXaXRoRm9ybVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBDbG9zZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuICB9XHJcbiAgb3BlbigpIHtcclxuICAgIC8vb3BlbnMgcG9wdXBcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIC8vIGNsb3NlcyBwb3B1cFxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIC8vIGxpc3RlbnMgZm9yIGVzYyBidXR0b25cclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gY2xvc2UgYnV0dG9uXHJcbiAgICB0aGlzLl9wb3B1cENsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRFbGVtZW50cyA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcclxuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XHJcbiAgICBpbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudHMpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXRFbGVtZW50cy5uYW1lXSA9IGlucHV0RWxlbWVudHMudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgY29uc3QgaW5wdXRFbGVtZW50cyA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcclxuICAgIGlucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaWYgKGRhdGFbaW5wdXQubmFtZV0pIHtcclxuICAgICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBtb2RhbHMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKV07XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hZGQtbW9kYWxcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEZvcm0gPVxyXG4gIHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNlZGl0LWNhcmQtZm9ybVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGRGb3JtID0gcHJvZmlsZUFkZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcblxyXG5leHBvcnQgY29uc3QgY2FyZExpc3RFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1idXR0b25cIik7XHJcbiIsImV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gICAgYWx0OiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gICAgYWx0OiBcIkxha2UgTG91c2llXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgICBhbHQ6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgICBhbHQ6IFwiTGF0ZW1hclwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gICAgYWx0OiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnIFwiLFxyXG4gICAgYWx0OiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgfSxcclxuXTtcclxuIiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvc2NyaXB0cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9zY3JpcHRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuLy8gaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9zY3JpcHRzL1BvcHVwLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL3NjcmlwdHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvc2NyaXB0cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvc2NyaXB0cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9zY3JpcHRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0ICogYXMgRE9NIGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IHsgdmFsaWRhdGlvblNldHRpbmdzIH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzLmpzXCI7XHJcbmltcG9ydCB7IGluaXRpYWxDYXJkcyB9IGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiO1xyXG5cclxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbi8vIHBvcHVwIHdpdGggZm9ybVxyXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWFkZC1tb2RhbFwiLFxyXG4gIGhhbmRsZUNhcmRGb3JtU3VibWl0XHJcbik7XHJcbm5ld0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4vLyBlZGl0IHBvcHVwIGZvcm1cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXCIucHJvZmlsZV9fdGl0bGVcIiwgXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XHJcbmNvbnN0IHBvcHVwRWRpdEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwcm9maWxlLWVkaXQtbW9kYWxcIiwgKGZvcm1EYXRhKSA9PiB7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZm9ybURhdGEpO1xyXG4gIHBvcHVwRWRpdEZvcm0uY2xvc2UoKTtcclxufSk7XHJcbnBvcHVwRWRpdEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuLy8gcG9wdXAgd2l0aCBpbWFnZVxyXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3ByZXZpZXctaW1hZ2UtbW9kYWxcIik7XHJcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vIHNlY3Rpb25cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChpdGVtLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUltYWdlQ2xpY2spO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudC5nZXRWaWV3KCk7XHJcbn1cclxuXHJcbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChpdGVtKTtcclxuICAgICAgc2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBcIi5jYXJkc19fbGlzdFwiXHJcbik7XHJcbnNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuXHJcbi8vIGZ1bmN0aW9uc1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZEZvcm1TdWJtaXQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmRJbnB1dCA9IGNyZWF0ZUNhcmQoZGF0YSk7XHJcbiAgc2VjdGlvbi5hZGRJdGVtKGNhcmRJbnB1dCk7XHJcbiAgbmV3Q2FyZFBvcHVwLmNsb3NlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soZGF0YSkge1xyXG4gIHBvcHVwSW1hZ2Uub3BlbihkYXRhKTtcclxufVxyXG5cclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRpb24oXHJcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIERPTS5wcm9maWxlRWRpdEZvcm1cclxuKTtcclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdGlvbihcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgRE9NLnByb2ZpbGVBZGRGb3JtXHJcbik7XHJcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy9ldmVudCBsaXN0ZW5lcnNcclxuRE9NLnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgZm9ybURhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHBvcHVwRWRpdEZvcm0uc2V0SW5wdXRWYWx1ZXMoZm9ybURhdGEpO1xyXG4gIHBvcHVwRWRpdEZvcm0ub3BlbigpO1xyXG59KTtcclxuXHJcbi8vIGFkZCBuZXcgY2FyZCBidXR0b25cclxuRE9NLnByb2ZpbGVBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgbmV3Q2FyZFBvcHVwLm9wZW4oKTtcclxufSk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAvL3JlbmRlciBpbmZvcm1hdGlvbiBmcm9tIHRoZSB1c2VyXHJcbiAgY29uc3RydWN0b3IodXNlck5hbWVTZWxlY3RvciwgZGVzY3JpcHRpb25OYW1lU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25OYW1lU2VsZWN0b3IpO1xyXG4gIH1cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IHVzZXJJbnB1dCA9IHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHVzZXJJbnB1dDtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKGRhdGEpIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5kZXNjcmlwdGlvbjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19wcmV2aWV3LWltYWdlXCIpO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX3ByZXZpZXctZGVzY3JpcHRpb25cIlxyXG4gICAgKTtcclxuICB9XHJcbiAgb3BlbihkYXRhKSB7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGRhdGEubGluaztcclxuICAgICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBkYXRhLm5hbWU7XHJcbiAgICAgIHRoaXMuX3BvcHVwSW1hZ2VEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgIH1cclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBhZGRJdGVtKGl0ZW0pIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJuYW1lIiwibGluayIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUljb24iLCJfaGFuZGxlRGVsZXRlQ2FyZCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZSIsIl9nZXRFbGVtZW50IiwiZG9jdW1lbnQiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjbG9uZU5vZGUiLCJnZXRWaWV3IiwiY2FyZFRpdGxlIiwiY2FyZEltYWdlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdGlvbiIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfZm9ybSIsIl9pbnB1dEVsZW1lbnRzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlRWwiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsImZvcm1FbHMiLCJpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJldmVyeSIsInZhbGlkaXR5IiwidmFsaWQiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImRpc2FibGVkIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInNldEV2ZW50TGlzdGVuZXJzIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX3BvcHVwQ2xvc2UiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5IiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwicmVzZXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dEVsZW1lbnRzIiwiaW5wdXRWYWx1ZXMiLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwiZGF0YSIsImlucHV0IiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlRWRpdE1vZGFsIiwicHJvZmlsZUFkZE1vZGFsIiwicHJvZmlsZUVkaXRGb3JtIiwicHJvZmlsZUFkZEZvcm0iLCJwcm9maWxlQWRkQnV0dG9uIiwidmFsaWRhdGlvblNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwibmV3Q2FyZFBvcHVwIiwiY2FyZElucHV0IiwiY3JlYXRlQ2FyZCIsInNlY3Rpb24iLCJhZGRJdGVtIiwidXNlckluZm8iLCJ1c2VyTmFtZVNlbGVjdG9yIiwiZGVzY3JpcHRpb25OYW1lU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfZGVzY3JpcHRpb25FbGVtZW50IiwiZ2V0VXNlckluZm8iLCJkZXNjcmlwdGlvbiIsInNldFVzZXJJbmZvIiwicG9wdXBFZGl0Rm9ybSIsImZvcm1EYXRhIiwicG9wdXBJbWFnZSIsIl9wb3B1cEltYWdlIiwiX3BvcHVwSW1hZ2VEZXNjcmlwdGlvbiIsIml0ZW0iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJwcmVwZW5kIiwiY2FyZEVsZW1lbnQiLCJET00iLCJhZGRGb3JtVmFsaWRhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==